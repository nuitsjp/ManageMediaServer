# ãƒ¡ãƒ‡ã‚£ã‚¢ã‚µãƒ¼ãƒãƒ¼ç§»è¡Œä½œæ¥­è©³ç´°

## æ¦‚è¦
å®¶åº­ç”¨ãƒ¡ãƒ‡ã‚£ã‚¢ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ã‚£ã‚¹ã‚¯ã‚’NTFSã‹ã‚‰ext4ã«å¤‰æ›ã—ã€æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’é©åˆ‡ãªã‚µãƒ¼ãƒ“ã‚¹åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ•´ç†ã—ã¦å¾©å…ƒã™ã‚‹ä½œæ¥­ã€‚

## âœ… å®Œäº†ã—ãŸä½œæ¥­

### 1. âœ… ãƒ‡ãƒ¼ã‚¿é€€é¿å®Œäº†ï¼ˆ2025-05-31ï¼‰
- å…¨ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ‡ãƒ¼ã‚¿ï¼ˆ235GBï¼‰ã‚’/tmp/backup-migration/ã«ä¸€æ™‚é€€é¿
- Pictures(21GB), Home Videos(13GB), Music Videos(201GB)ã®é€€é¿å®Œäº†
- æ¨©é™å•é¡Œè§£æ±ºï¼ˆubuntu:ubuntuæ‰€æœ‰è€…å¤‰æ›´ï¼‰

### 2. âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ã‚£ã‚¹ã‚¯ã®ext4å¤‰æ›å®Œäº†ï¼ˆ2025-05-31ï¼‰
- /dev/sda1ã‚’NTFSã‹ã‚‰ext4ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆãƒ©ãƒ™ãƒ«: "MediaBackup"ï¼‰
- UUID: b5afccae-200c-4013-9b41-b832f5c1ef49
- /etc/fstabã«æ°¸ç¶šãƒã‚¦ãƒ³ãƒˆè¨­å®šè¿½åŠ 
- /mnt/backupã«ãƒã‚¦ãƒ³ãƒˆï¼ˆ880GBåˆ©ç”¨å¯èƒ½ã€602GBç©ºãï¼‰

### 3. âœ… ã‚µãƒ¼ãƒ“ã‚¹åˆ¥ãƒ‡ãƒ¼ã‚¿æ•´ç†å®Œäº†ï¼ˆ2025-05-31ï¼‰
- /mnt/backup/immich-backup/ï¼ˆ33GBï¼‰: Pictures + Home Videosçµ±åˆ
- /mnt/backup/jellyfin-backup/ï¼ˆ201GBï¼‰: Music Videos
- ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•å®Œäº†

### 4. âœ… ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ‡ãƒ¼ã‚¿ã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ç§»å‹•å®Œäº†ï¼ˆ2025-05-31ï¼‰
**å®Ÿè¡Œå†…å®¹**:
- Pictures + Home Videos â†’ `/mnt/data/immich/external/` (ç›´ä¸‹ã«é…ç½®)
- Music Videos â†’ `/mnt/data/jellyfin/` (ç›´ä¸‹ã«é…ç½®)
- æ¨©é™è¨­å®š: ubuntu:ubuntu
- ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä½œæˆã›ãšã€å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´ä¸‹ã«ç§»å‹•

**å®Ÿè¡Œçµæœ**:
```bash
# Immichå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
/mnt/data/immich/external/: 21GB, 4,705ãƒ•ã‚¡ã‚¤ãƒ«

# Jellyfinãƒ©ã‚¤ãƒ–ãƒ©ãƒª  
/mnt/data/jellyfin/: 185GB, 37ãƒ•ã‚¡ã‚¤ãƒ«

# å…¨ä½“ã®ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡
NVMeãƒ‡ã‚£ã‚¹ã‚¯: 220GBä½¿ç”¨, 226GBç©ºã (50%ä½¿ç”¨ç‡)
```

### 5. âœ… ä¸€æ™‚é€€é¿ãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†ï¼ˆ2025-05-31ï¼‰
- /tmp/backup-migration/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤å®Œäº†
- /tmp/backup-temp/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤å®Œäº†

### 6. âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°å®Œäº†ï¼ˆ2025-05-31ï¼‰
- server-configuration.md: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ã‚£ã‚¹ã‚¯æƒ…å ±æ›´æ–°
- TODO_DETAIL.md: ä½œæ¥­å®Œäº†çŠ¶æ³ã®è¨˜éŒ²

## ğŸ¯ ä½œæ¥­å®Œäº†ã‚µãƒãƒªãƒ¼

**ç§»è¡Œãƒ‡ãƒ¼ã‚¿ç·é‡**: 235GB â†’ 206GB (åœ§ç¸®åŠ¹æœã‚ã‚Š)
- **Immich**: Pictures(21GB) + Home Videos(13GB) â†’ 21GB
- **Jellyfin**: Music Videos(201GB) â†’ 185GB

**æœ€çµ‚çš„ãªç‰©ç†æ§‹æˆ**:

```
/dev/nvme0n1 (477GB) - ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ‡ã‚£ã‚¹ã‚¯
â””â”€ ubuntu-lv (473.9GB): / (ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ )
   â”œâ”€ /home (PROJECT_ROOT)
   â”œâ”€ /var (Dockerãƒ»ãƒ­ã‚°)
   â””â”€ /mnt/data (ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸)
      â”œâ”€ /mnt/data/immich/external/ (21GB, 4,705ãƒ•ã‚¡ã‚¤ãƒ«)
      â””â”€ /mnt/data/jellyfin/ (185GB, 37ãƒ•ã‚¡ã‚¤ãƒ«)

/dev/sda1 (894GB) - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ã‚£ã‚¹ã‚¯ï¼ˆext4ï¼‰
â””â”€ /mnt/backup (ãƒã‚¦ãƒ³ãƒˆæ¸ˆã¿)
   â”œâ”€ immich-backup/ (33GB, ä¿æŒ)
   â”œâ”€ jellyfin-backup/ (201GB, ä¿æŒ)  
   â””â”€ system-backup/ (ä»Šå¾Œä½¿ç”¨)
```

## ğŸ“‹ æ¬¡ã®æ¨å¥¨ä½œæ¥­

### A. Immichå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¨­å®š
1. Immich Web UIã«ã‚¢ã‚¯ã‚»ã‚¹
2. ç®¡ç†ç”»é¢ â†’ å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ 
3. ãƒ‘ã‚¹: `/usr/src/app/external` (ã‚³ãƒ³ãƒ†ãƒŠå†…ãƒ‘ã‚¹)
4. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¹ã‚­ãƒ£ãƒ³å®Ÿè¡Œ

### B. Jellyfinãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å†ã‚¹ã‚­ãƒ£ãƒ³
1. Jellyfin Web UIã«ã‚¢ã‚¯ã‚»ã‚¹  
2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
3. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†ã‚¹ã‚­ãƒ£ãƒ³å®Ÿè¡Œ

### C. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥ã®ç¢ºç«‹
- å®šæœŸçš„ãªãƒ¡ãƒ‡ã‚£ã‚¢ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š
- ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è‡ªå‹•åŒ–
- /mnt/backup/system-backup/ ã®æ´»ç”¨

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨å®‰å…¨æ€§

**é”æˆã•ã‚ŒãŸç‰©ç†åˆ†é›¢**:
- âœ… ãƒ¡ãƒ‡ã‚£ã‚¢é‹ç”¨: NVMeãƒ‡ã‚£ã‚¹ã‚¯ï¼ˆé«˜é€Ÿãƒ»ä¿¡é ¼æ€§ï¼‰
- âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é‹ç”¨: SATA SSDï¼ˆç‰©ç†åˆ†é›¢ãƒ»å®¹é‡é‡è¦–ï¼‰  
- âœ… ãƒªã‚¹ã‚¯åˆ†æ•£: ãƒ‡ã‚£ã‚¹ã‚¯æ•…éšœæ™‚ã®å½±éŸ¿ç¯„å›²é™å®š

**å®¹é‡ç®¡ç†**:
- âœ… NVMe: 226GBç©ºãå®¹é‡ï¼ˆä»Šå¾Œã®æ‹¡å¼µä½™åœ°ï¼‰
- âœ… SATA: 602GBç©ºãå®¹é‡ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ååˆ†ãªä½™è£•ï¼‰

### ç¾åœ¨ã®æ®‹ä½œæ¥­ ğŸ”„

#### 4. ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ‡ãƒ¼ã‚¿ã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚³ãƒ”ãƒ¼

**ç›®çš„**: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã‚µãƒ¼ãƒ“ã‚¹ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ãƒ‡ãƒ¼ã‚¿é…ç½®

**ä½œæ¥­æ¦‚è¦**:
1. Immichãƒ‡ãƒ¼ã‚¿ã®ã‚³ãƒ”ãƒ¼: `/mnt/backup/immich-backup/` â†’ Immichå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
2. Jellyfinãƒ‡ãƒ¼ã‚¿ã®ã‚³ãƒ”ãƒ¼: `/mnt/backup/jellyfin-backup/` â†’ Jellyfinãƒ¡ãƒ‡ã‚£ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

**è©³ç´°æ‰‹é †**:

##### 4.1 Immichãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ã‚³ãƒ”ãƒ¼

```bash
# 1. Immichå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæº–å‚™
sudo mkdir -p /mnt/data/immich/library
sudo chown -R ubuntu:ubuntu /mnt/data/immich/library
sudo chmod -R 755 /mnt/data/immich/library

# 2. ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ”ãƒ¼å®Ÿè¡Œï¼ˆ33GBï¼‰
# æ¨å®šæ™‚é–“: 10-15åˆ†ï¼ˆNVMe â† SATAé–“ã‚³ãƒ”ãƒ¼ï¼‰
rsync -av --progress /mnt/backup/immich-backup/ /mnt/data/immich/library/

# 3. æ¨©é™ç¢ºèªãƒ»ä¿®æ­£
sudo chown -R ubuntu:ubuntu /mnt/data/immich/library
find /mnt/data/immich/library -type d -exec chmod 755 {} \;
find /mnt/data/immich/library -type f -exec chmod 644 {} \;

# 4. ã‚³ãƒ”ãƒ¼çµæœç¢ºèª
du -sh /mnt/data/immich/library
ls -la /mnt/data/immich/library/
```

##### 4.2 Jellyfinãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ã‚³ãƒ”ãƒ¼

```bash
# 1. Jellyfinãƒ¡ãƒ‡ã‚£ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæº–å‚™
sudo mkdir -p /mnt/data/jellyfin/media/music-videos
sudo chown -R ubuntu:ubuntu /mnt/data/jellyfin/media
sudo chmod -R 755 /mnt/data/jellyfin/media

# 2. ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ”ãƒ¼å®Ÿè¡Œï¼ˆ201GBï¼‰
# æ¨å®šæ™‚é–“: 40-60åˆ†ï¼ˆå¤§å®¹é‡ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
rsync -av --progress /mnt/backup/jellyfin-backup/ /mnt/data/jellyfin/media/music-videos/

# 3. æ¨©é™ç¢ºèªãƒ»ä¿®æ­£
sudo chown -R ubuntu:ubuntu /mnt/data/jellyfin/media
find /mnt/data/jellyfin/media -type d -exec chmod 755 {} \;
find /mnt/data/jellyfin/media -type f -exec chmod 644 {} \;

# 4. ã‚³ãƒ”ãƒ¼çµæœç¢ºèª
du -sh /mnt/data/jellyfin/media/music-videos
ls -la /mnt/data/jellyfin/media/music-videos/
```

##### 4.3 å®¹é‡ç¢ºèªãƒ»æ¤œè¨¼

```bash
# 1. å…¨ä½“å®¹é‡ç¢ºèª
df -h /mnt/data
du -sh /mnt/data/immich/library
du -sh /mnt/data/jellyfin/media/music-videos

# 2. ãƒ•ã‚¡ã‚¤ãƒ«æ•°ç¢ºèª
find /mnt/data/immich/library -type f | wc -l
find /mnt/data/jellyfin/media/music-videos -type f | wc -l

# 3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ã®æ•´åˆæ€§ç¢ºèª
# Immichï¼ˆå†™çœŸãƒ»å‹•ç”»ï¼‰
find /mnt/backup/immich-backup -type f | wc -l
find /mnt/data/immich/library -type f | wc -l

# Jellyfinï¼ˆãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ãƒ“ãƒ‡ã‚ªï¼‰
find /mnt/backup/jellyfin-backup -type f | wc -l
find /mnt/data/jellyfin/media/music-videos -type f | wc -l
```

#### 5. ä¸€æ™‚é€€é¿ãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

**ç›®çš„**: /tmp/backup-migration/ã¨/tmp/backup-temp/ã®å‰Šé™¤

```bash
# 1. ã‚³ãƒ”ãƒ¼å®Œäº†å¾Œã®ç¢ºèª
ls -la /tmp/backup-migration/
ls -la /tmp/backup-temp/

# 2. å®¹é‡ç¢ºèªï¼ˆå‰Šé™¤äºˆå®šã‚µã‚¤ã‚ºï¼‰
du -sh /tmp/backup-migration/
du -sh /tmp/backup-temp/

# 3. å‰Šé™¤å®Ÿè¡Œ
sudo rm -rf /tmp/backup-migration/
sudo rm -rf /tmp/backup-temp/

# 4. å‰Šé™¤ç¢ºèª
ls /tmp/ | grep backup
```

### å®Ÿè¡Œäºˆå®šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ã‚¿ã‚¹ã‚¯ | æ¨å®šæ™‚é–“ | ãƒ‡ãƒ¼ã‚¿é‡ | å‚™è€ƒ |
|--------|----------|----------|------|
| 4.1 Immichã‚³ãƒ”ãƒ¼ | 10-15åˆ† | 33GB | å†™çœŸãƒ»ãƒ›ãƒ¼ãƒ ãƒ“ãƒ‡ã‚ª |
| 4.2 Jellyfinã‚³ãƒ”ãƒ¼ | 40-60åˆ† | 201GB | ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ãƒ“ãƒ‡ã‚ª |
| 4.3 æ¤œè¨¼ãƒ»ç¢ºèª | 5-10åˆ† | - | æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ |
| 5. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— | 2-5åˆ† | 235GBå‰Šé™¤ | ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ |
| **åˆè¨ˆ** | **60-90åˆ†** | **234GBç§»å‹•** | **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Œäº†** |

### æƒ³å®šã•ã‚Œã‚‹æœ€çµ‚æ§‹æˆ

#### ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆ/mnt/data - NVMeï¼‰
```
/mnt/data/
â”œâ”€â”€ immich/
â”‚   â””â”€â”€ library/          # 33GBï¼ˆå†™çœŸãƒ»ãƒ›ãƒ¼ãƒ ãƒ“ãƒ‡ã‚ªçµ±åˆï¼‰
â”œâ”€â”€ jellyfin/
â”‚   â””â”€â”€ media/
â”‚       â””â”€â”€ music-videos/ # 201GBï¼ˆãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ãƒ“ãƒ‡ã‚ªï¼‰
â””â”€â”€ cache/                # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«
```

#### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆ/mnt/backup - SATA SSDï¼‰
```
/mnt/backup/
â”œâ”€â”€ immich-backup/        # 33GBï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚³ãƒ”ãƒ¼ï¼‰
â”œâ”€â”€ jellyfin-backup/      # 201GBï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚³ãƒ”ãƒ¼ï¼‰
â””â”€â”€ system-backup/        # å°†æ¥ã®ã‚·ã‚¹ãƒ†ãƒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨
```

### æ³¨æ„äº‹é …ãƒ»ãƒªã‚¹ã‚¯ç®¡ç†

1. **å®¹é‡ãƒã‚§ãƒƒã‚¯**: å„ã‚³ãƒ”ãƒ¼å‰ã«ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã‚’ç¢ºèª
2. **æ¨©é™ç¢ºèª**: ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½æ€§ã‚’æ¤œè¨¼
3. **æ•´åˆæ€§æ¤œè¨¼**: ãƒ•ã‚¡ã‚¤ãƒ«æ•°ãƒ»ã‚µã‚¤ã‚ºã®ä¸€è‡´ç¢ºèª
4. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¿æŒ**: ä¸€æ™‚é€€é¿ãƒ‡ãƒ¼ã‚¿ã¯æ¤œè¨¼å®Œäº†å¾Œã«å‰Šé™¤

### æ¬¡å›ä»¥é™ã®ã‚¿ã‚¹ã‚¯ï¼ˆå°†æ¥ï¼‰

- [ ] Immichå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¨­å®šãƒ»èªè­˜ç¢ºèª
- [ ] Jellyfinãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¹ã‚­ãƒ£ãƒ³ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—
- [ ] ã‚·ã‚¹ãƒ†ãƒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ
- [ ] å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®è‡ªå‹•åŒ–è¨­å®š